{% assign segments = page.url | split: '/' %}
{% assign lang_segment = segments[1] %}
{% if lang_segment == 'hi' %}
  {% assign home_path = '/hi/' %}
  {% assign about_path = '/hi/about/' %}
  {% assign academics_path = '/hi/academics/' %}
  {% assign admissions_path = '/hi/admissions/' %}
  {% assign gallery_path = '/hi/gallery/' %}
  {% assign contact_path = '/hi/contact/' %}
  {% assign current_lang = 'hi' %}
  {% assign alt_lang = 'en' %}
  {% assign alt_path = page.url | replace_first: '/hi/', '/en/' %}
{% else %}
  {% assign home_path = '/en/' %}
  {% assign about_path = '/en/about/' %}
  {% assign academics_path = '/en/academics/' %}
  {% assign admissions_path = '/en/admissions/' %}
  {% assign gallery_path = '/en/gallery/' %}
  {% assign contact_path = '/en/contact/' %}
  {% assign current_lang = 'en' %}
  {% assign alt_lang = 'hi' %}
  {% assign alt_path = page.url | replace_first: '/en/', '/hi/' %}
{% endif %}

{%- comment -%}
If replace_first doesn't find a match (e.g., homepage edge cases), default to localized homes:
{%- endcomment -%}
{% if alt_path == page.url %}
  {% if current_lang == 'en' %}
    {% assign alt_path = '/hi/' %}
  {% else %}
    {% assign alt_path = '/en/' %}
  {% endif %}
{% endif %}

<header class="site-header">
  <div class="container header-bar">
    <div class="header-title"><a href="{{ "/" | relative_url }}" class="header-link">Veer Patta Public School</a></div>
    <nav class="header-nav">
      <div class="lang-switch-wrap" aria-label="Language">
        <span class="lang-switch-label">
          <!-- tiny globe icon -->
          <svg class="globe" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 010-16 8 8 0 010 16z"/>
            <path d="M3.5 12h17M12 3.5v17M7 12c0 5 2.2 8.5 5 8.5S17 17 17 12 14.8 3.5 12 3.5 7 7 7 12z" fill="none" stroke="currentColor" stroke-width="1"/>
          </svg>
          <span class="visually-hidden">Language</span>
        </span>

        <nav class="lang-segmented" role="tablist" aria-label="Select language">
          <span class="seg-track" aria-hidden="true"></span>
          {% if current_lang == 'en' %}
            <span class="seg current" role="tab" aria-current="true" lang="en">English</span>
            <a class="seg" role="tab" href="{{ alt_path | relative_url }}" lang="hi" hreflang="hi" aria-label="Switch to Hindi">हिंदी</a>
          {% else %}
            <a class="seg" role="tab" href="{{ alt_path | relative_url }}" lang="en" hreflang="en" aria-label="Switch to English">English</a>
            <span class="seg current" role="tab" aria-current="true" lang="hi">हिंदी</span>
          {% endif %}
        </nav>
      </div>
      <a class="nav-link" href="{{ about_path | relative_url }}">About</a>
      <a class="nav-link" href="{{ academics_path | relative_url }}">Academics</a>
      <a href="{{ admissions_path | relative_url }}" class="nav-link">Admissions</a>
      <a class="nav-link" href="{{ gallery_path | relative_url }}">Gallery</a>
      <a class="nav-link" href="{{ contact_path | relative_url }}">Contact</a>
    </nav>
  </div>
</header>
